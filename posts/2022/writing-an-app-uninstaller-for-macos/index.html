<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Writing an App Uninstaller for macOS | Al Idian</title>

    <meta name="description" content="A personal site about software development">

    <link rel="preconnect" href="https://fonts.gstatic.com"> 
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&amp;family=Merriweather&amp;display=swap">

    <link rel="stylesheet" href="/css/syntax-highlight.css">
    <link rel="stylesheet" href="/css/style.css">

    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="/assets/favicon/site.webmanifest">
</head>
<body>
    <header>
        <h3 id="site-title" class="no-margin no-padding"><a href="/">Al Idian</a></h3>
    </header>

    <main>
        
<h2 id="post-title">Writing an App Uninstaller for macOS</h2>
<p id="post-date" class="gray-text">2022-08-16</p>

<h3>What did I make?</h3>
<p>The process of uninstalling apps on macOS can be disorienting for new users.
While on Windows, users typically use an uninstaller or the <em>Add or Remove Programs</em> utility, uninstalling apps on macOS simply means dragging the .app file to trash.
For many, this minimalistic process triggers distrust and disbelief.
What about preference files and other gunk written by the application that presumably remain in the system?</p>
<p>I recently wrote an app uninstaller called <a href="https://github.com/idianal/zap"><code>zap</code></a> that deals with this problem.
It is command-line only and is packaged as a script that can be downloaded from GitHub and run without installation.</p>
<p><code>zap</code> is similar to other uninstaller applications on macOS like <a href="http://freemacsoft.net/appcleaner/">AppCleaner</a> in that it tries to accomplish the same task.
Unlike AppCleaner, <code>zap</code> is free and open source.
Users can be confident that <code>zap</code> does only what it says it does.</p>
<p>For a short usage guide, see the readme <a href="https://github.com/idianal/zap">here</a>.</p>
<h3>Decisions, decisions…</h3>
<p>To find files to remove, <code>zap</code> first checks inside the .app file.
In macOS, .app files are directories that contain the binaries and ancillary files related to the application.
<code>zap</code> expects to find a file called Info.plist, which contain identifiers for the application.</p>
<p><code>zap</code> looks in some common directories for any files that contain the retrieved identifiers.
Instead of deleting, it moves these files to trash.</p>
<p>In my testing, the approach used provides a good balance of reliability and protection.
<code>zap</code> intentionally casts a wide net to gather files for deletion but it requires a manual review from the user to mitigate any false positives.</p>
<p>There are also obvious limitations:</p>
<ol>
<li>To find files to delete, <code>zap</code> relies on identifiers in Info.plist.
If an unrelated file’s name somehow contains one of the identifiers, it will be moved to trash.</li>
<li>Only a static list of directories are searched.
Any files written to unconventional locations in the file system will be missed.</li>
<li>Manual intervention is required to completely delete any files found.
This step is required to give the user a chance to restore any false matches.</li>
</ol>
<h3>The state of uninstallers</h3>
<p>The process of uninstalling apps is imperfect and messy on macOS, and the situation isn’t much better on Windows and Linux.
Mass-market operating systems generally allow apps the freedom to write to unconventional locations on the file system.
As a result, app uninstallation often leaves behind unnecessary files.
While these files are usually unobtrusive and insignificant, some users certainly prefer that these files be removed as part of the uninstallation process.</p>
<h3>Recommendations</h3>
<p>In my opinion, it is unlikely the situation will improve anytime soon for personal computers.
I recommend the following multi-part approach:</p>
<ol>
<li>Mostly follow the officially-supported way of uninstalling apps.
On macOS, this typically means simply dragging the .app to the trash.</li>
<li>On a regular basis (perhaps once every 1-2 years), completely refresh your computer.
This means removing files and directories and reinstalling the OS.
To make this process easier, one can use a Time Machine image <em>from a freshly-installed state</em>.</li>
<li>In rare instances where you want to purge an app from your system without doing a complete refresh, use <code>zap</code>.</li>
</ol>


    </main>

    <footer>
        <p class="center-text no-margin no-padding"><a href="https://github.com/idianal/personal-site/blob/main/LICENSE">MIT License</a></p>
        <p class="center-text no-margin no-padding"><a href="https://github.com/idianal/personal-site">/idianal</a></p>
    </footer>
</body>
</html>
